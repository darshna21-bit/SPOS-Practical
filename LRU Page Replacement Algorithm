// üß† LRU (Least Recently Used) Page Replacement Algorithm in Java
// This program simulates how an OS replaces pages in memory using the LRU method.
// It removes the page that was least recently used when a new page needs to be loaded.

import java.util.*;
public class Lru {   
    public static void main(String[] args) {

        // Step 1Ô∏è‚É£: Create Scanner object to read user input
        Scanner scanner = new Scanner(System.in);

        // Step 2Ô∏è‚É£: Get number of frames (memory slots)
        System.out.print("Enter the number of frames: ");
        int numberOfFrames = scanner.nextInt();

        // Step 3Ô∏è‚É£: Get number of pages (reference string length)
        System.out.print("Enter the number of pages: ");
        int numberOfPages = scanner.nextInt();

        // Step 4Ô∏è‚É£: Input the page reference string (sequence of page requests)
        System.out.print("Enter the page reference string (space-separated): ");
        int[] pageReferenceString = new int[numberOfPages];

        // Read each page from user input
        for (int i = 0; i < numberOfPages; i++) {
            pageReferenceString[i] = scanner.nextInt();
        }

        // Step 5Ô∏è‚É£: Create a LinkedList to represent frames in memory
        // We use LinkedList because we can easily remove and add pages to track usage order
        LinkedList<Integer> frames = new LinkedList<>();

        int pageFaults = 0;

        // Step 6Ô∏è‚É£: Iterate through each page in the reference string
        for (int page : pageReferenceString) {

            // If the current page is NOT present in memory (page fault)
            if (!frames.contains(page)) {

                // If memory is full, remove the least recently used page (front of list)
                if (frames.size() >= numberOfFrames) {
                    frames.removeFirst();
                }

                // Add the new page to the end (most recently used)
                frames.addLast(page);

                pageFaults++;
            } 
            else {
                // If the page already exists in memory (page hit)
                // Remove it from its current position
                // and move it to the end (most recently used position)
                frames.remove(frames.indexOf(page));
                frames.addLast(page);
            }

            // Step 7Ô∏è‚É£: Display current state of frames after each operation
            System.out.print("Frames: ");
            for (int frame : frames) {
                System.out.print(frame + " ");
            }
            System.out.println();
        }

        System.out.println("Total Page Faults: " + pageFaults);
        System.out.println("Page Fault Ratio: " + pageFaults + ":" + numberOfPages);

        // Close the scanner to free resources
        scanner.close();
    }
}
